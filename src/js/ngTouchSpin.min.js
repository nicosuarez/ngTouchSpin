angular.module("jkuri.touchspin",[]).directive("ngTouchSpin",["$timeout","$interval","$document",function(e,t,a){"use strict";var n={left:37,right:39},i=function(e,t){e.min=t.min||0,e.max=t.max||100,e.step=t.step||1,e.prefix=t.prefix||void 0,e.postfix=t.postfix||void 0,e.decimals=t.decimals||0,e.stepInterval=t.stepInterval||100,e.stepIntervalDelay=t.stepIntervalDelay||500,e.initval=t.initval||"",e.val=t.value||e.initval};return{restrict:"EA",require:"?ngModel",scope:!0,replace:!0,link:function(s,l,o,p){i(s,o);var r,c,u,v=a.find("body"),d=s.val;p.$setViewValue(s.val),s.focused=!1,s.decrement=function(){d=s.val;var e=parseFloat(parseFloat(Number(s.val))-parseFloat(s.step)).toFixed(s.decimals);return parseFloat(e)<parseFloat(s.min)?(e=parseFloat(s.min).toFixed(s.decimals),s.val=e,void p.$setViewValue(e)):(s.val=e,void p.$setViewValue(e))},s.increment=function(){d=s.val;var e=parseFloat(parseFloat(Number(s.val))+parseFloat(s.step)).toFixed(s.decimals);parseFloat(e)>parseFloat(s.max)||(s.val=e,p.$setViewValue(e))},s.startSpinUp=function(){s.checkValue(),s.increment(),u=Date.now(),s.stopSpin(),e(function(){c=t(function(){s.increment()},s.stepInterval)},s.stepIntervalDelay)},s.startSpinDown=function(){s.checkValue(),s.decrement(),u=Date.now();e(function(){c=t(function(){s.decrement()},s.stepInterval)},s.stepIntervalDelay)},s.stopSpin=function(){Date.now()-u>s.stepIntervalDelay?(e.cancel(r),t.cancel(c)):e(function(){e.cancel(r),t.cancel(c)},s.stepIntervalDelay)},s.checkValue=function(){var e;s.min&&parseFloat(s.val)<parseFloat(s.min)&&(s.val=s.min),s.max&&parseFloat(s.val)>parseFloat(s.max)&&(s.val=s.max),""===s.val||s.val.match(/^-?(?:\d+|\d*\.\d+)$/i)||(e=""!==d?parseFloat(d).toFixed(s.decimals):parseFloat(s.min).toFixed(s.decimals),s.val=e,p.$setViewValue(e)),s.focused=!1},s.focus=function(){s.focused=!0},p.$render=function(){s.val=p.$viewValue},v.bind("keydown",function(e){if(s.focused){e.preventDefault();var t=e.which;t===n.right?s.increment():t===n.left&&s.decrement(),s.$apply()}})},template:'<div class="input-group">  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinDown()" ng-mouseup="stopSpin()"><i class="fa fa-minus"></i></button>  </span>  <span class="input-group-addon" ng-show="prefix" ng-bind="prefix"></span>  <input type="text" ng-model="val" class="form-control" ng-blur="checkValue()" ng-focus="focus()">  <span class="input-group-addon" ng-show="postfix" ng-bind="postfix"></span>  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinUp()" ng-mouseup="stopSpin()"><i class="fa fa-plus"></i></button>  </span></div>'}}]);